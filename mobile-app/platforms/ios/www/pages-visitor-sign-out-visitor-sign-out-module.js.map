{"version":3,"sources":["webpack:///./src/app/pages/visitor-sign-out/visitor-sign-out.module.ts","webpack:///./src/app/pages/visitor-sign-out/visitor-sign-out.page.html","webpack:///./src/app/pages/visitor-sign-out/visitor-sign-out.page.scss","webpack:///./src/app/pages/visitor-sign-out/visitor-sign-out.page.ts"],"names":[],"mappings":"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","file":"pages-visitor-sign-out-visitor-sign-out-module.js","sourcesContent":["import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { VisitorSignOutPage } from './visitor-sign-out.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\nimport { NgxSpinnerModule } from \"ngx-spinner\";\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VisitorSignOutPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ComponentsModule,\n    ReactiveFormsModule,\n    NgxSpinnerModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [VisitorSignOutPage],\n  schemas: [CUSTOM_ELEMENTS_SCHEMA],\n})\nexport class VisitorSignOutPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button color=\\\"secondary\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n        <ion-text color=\\\"light\\\">\\n          <ion-text color=\\\"light\\\" class=\\\"fw700\\\">Visitors</ion-text>\\n        </ion-text>\\n    </ion-title>\\n    \\n  </ion-toolbar>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-searchbar (ionInput)=\\\"filterList($event.target.value)\\\"></ion-searchbar>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"doRefresh($event)\\\" style=\\\"color: darkblue;\\\">\\n    <ion-refresher-content\\n      \\n      pullingIcon=\\\"chevron-down-circle-outline\\\"\\n      pullingText=\\\"Pull to refresh\\\"\\n      refreshingSpinner=\\\"circles\\\"\\n      refreshingText=\\\"Refreshing Visitors...\\\">\\n    </ion-refresher-content>\\n  </ion-refresher>\\n\\n  <ion-card *ngFor=\\\"let visitor of visitors\\\">\\n\\n    <ion-card-content no-padding>\\n      <ion-card-title style=\\\"padding-bottom: 5px; font-size: 18px; background-color:#2f32a0; color: white; padding: 5px;\\\">\\n        {{visitor.first_name}} {{visitor.last_name}}\\n      </ion-card-title>\\n      <p style=\\\"font-size: 13px; padding: 6px;\\\">\\n        <strong>Date: </strong>{{visitor.createdAt | date: 'dd/MM/yyyy'}} <br> <strong>Sign in Time:</strong> {{visitor.createdAt | date: 'shortTime'}} \\n        <br> <strong>Pupose of Visit: </strong>{{visitor.purpose_of_visit}}\\n      </p>\\n      <!-- <p style=\\\"font-size: 13px; padding: 6px;\\\" >\\n        <strong>Visitor Seen: </strong>\\n      <span [ngClass]=\\\"{\\n        'yes' : visitor.visitor_seen == true,\\n        'no' : visitor.visitor_seen == false\\n     }\\\"> {{visitor.visitor_seen? 'Yes' : \\\"No\\\"}}</span> \\n      </p> -->\\n    </ion-card-content>\\n\\n    <ion-row no-padding>\\n      <ion-col no-padding>\\n        <ion-button expand=\\\"clear\\\" size=\\\"small\\\" color=\\\"primary\\\" style=\\\"width: 100%;\\\" icon-start (click)=\\\"presentVisitor(visitor)\\\">\\n          <ion-icon name='information'></ion-icon>\\n          &nbsp; Info\\n        </ion-button>\\n      </ion-col>\\n      <ion-col text-right no-padding>\\n        <ion-button expand=\\\"clear\\\" size=\\\"small\\\" color=\\\"primary\\\" style=\\\"width: 100%;\\\" icon-start (click)=\\\"signOut(visitor._id)\\\">\\n          <ion-icon name='log-out'></ion-icon>\\n          &nbsp; Sign Out\\n        </ion-button>\\n      </ion-col>\\n    </ion-row>\\n\\n  </ion-card>\\n  \\n  \\n</ion-content>\\n\\n<ngx-spinner></ngx-spinner>\\n\\n<popmenu></popmenu>\"","module.exports = \":host ion-content {\\n  --background: var(--ion-color-light);\\n}\\n:host ion-item {\\n  border-radius: 0;\\n  border-bottom: 1px dotted var(--ion-color-medium);\\n}\\n:host ion-card.no-radius {\\n  border-radius: 0;\\n}\\n.yes {\\n  color: #0bda0b;\\n}\\n.no {\\n  color: red;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YW11a2EvRG9jdW1lbnRzL0RldmVsb3BtZW50UHJvamVjdHMvYm9va2luZy1tYXRlL21vYmlsZS1hcHAvc3JjL2FwcC9wYWdlcy92aXNpdG9yLXNpZ24tb3V0L3Zpc2l0b3Itc2lnbi1vdXQucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy92aXNpdG9yLXNpZ24tb3V0L3Zpc2l0b3Itc2lnbi1vdXQucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0ksb0NBQUE7QUNBUjtBREdJO0VBQ0ksZ0JBQUE7RUFDQSxpREFBQTtBQ0RSO0FES1E7RUFDSSxnQkFBQTtBQ0haO0FEUUE7RUFDSSxjQUFBO0FDTEo7QURRRTtFQUNFLFVBQUE7QUNMSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3Zpc2l0b3Itc2lnbi1vdXQvdmlzaXRvci1zaWduLW91dC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gICAgaW9uLWNvbnRlbnQge1xuICAgICAgICAtLWJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1saWdodCk7XG4gICAgfVxuXG4gICAgaW9uLWl0ZW0ge1xuICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgICAgICBib3JkZXItYm90dG9tOiAxcHggZG90dGVkIHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xuICAgIH1cblxuICAgIGlvbi1jYXJkIHtcbiAgICAgICAgJi5uby1yYWRpdXMge1xuICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLnllcyB7XG4gICAgY29sb3I6ICMwYmRhMGI7XG4gIH1cbiAgXG4gIC5ubyB7XG4gICAgY29sb3I6IHJlZDtcbiAgfSIsIjpob3N0IGlvbi1jb250ZW50IHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItbGlnaHQpO1xufVxuOmhvc3QgaW9uLWl0ZW0ge1xuICBib3JkZXItcmFkaXVzOiAwO1xuICBib3JkZXItYm90dG9tOiAxcHggZG90dGVkIHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xufVxuOmhvc3QgaW9uLWNhcmQubm8tcmFkaXVzIHtcbiAgYm9yZGVyLXJhZGl1czogMDtcbn1cblxuLnllcyB7XG4gIGNvbG9yOiAjMGJkYTBiO1xufVxuXG4ubm8ge1xuICBjb2xvcjogcmVkO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport {\n  NavController,\n  AlertController,\n  MenuController,\n  ToastController,\n  PopoverController,\n  ModalController, \n  LoadingController} from '@ionic/angular';\nimport { VisitorsService } from 'src/app/services/visitors.service';\nimport { NgxSpinnerService } from \"ngx-spinner\";\nimport { Storage } from '@ionic/storage';\n\n\n// Modals\nimport { SearchFilterPage } from '../../pages/modal/search-filter/search-filter.page'\nimport { ImagePage } from './../modal/image/image.page';import { finalize } from 'rxjs/operators';\n;\n\nconst TOKEN_KEY = 'access_token';\n\n@Component({\n  selector: 'app-visitor-sign-out',\n  templateUrl: './visitor-sign-out.page.html',\n  styleUrls: ['./visitor-sign-out.page.scss'],\n})\nexport class VisitorSignOutPage implements OnInit {\n  searchKey = '';\n  visitors: any;\n  staff:any;\n\n  constructor(\n    public navCtrl: NavController,\n    public menuCtrl: MenuController,\n    public popoverCtrl: PopoverController,\n    public alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n    public modalCtrl: ModalController,\n    public toastCtrl: ToastController,\n    private service: VisitorsService,\n    private spinner: NgxSpinnerService,\n    private helper: JwtHelperService, \n    private storage: Storage,\n  ) {\n\n  }\n\n  async ngOnInit() {\n    await this.getStaff();\n    this.spinner.show();\n    await this.getVisitors();\n  }\n\n  async getStaff() {\n    await this.storage.get(TOKEN_KEY)\n      .then((token) => {\n\n        if (token) {\n          let decoded = this.helper.decodeToken(token);\n          this.staff = decoded;\n        }\n\n      });\n  }\n\n  getVisitors() {\n    this.service.visitorsCurrentlySignedIn(this.staff).pipe(\n      finalize(() => this.spinner.hide())\n    ).subscribe(res => {\n        this.visitors = res;\n      }, err => {\n        console.log(err);\n      });\n  }\n\n  doRefresh(event) {\n    setTimeout(() => {\n      this.getVisitors();\n      event.target.complete();\n    }, 2000);\n  }\n\n  ionViewWillEnter() {\n    this.menuCtrl.enable(true);\n  }\n\n  async searchFilter () {\n    const modal = await this.modalCtrl.create({\n      component: SearchFilterPage\n    });\n    return await modal.present();\n  }\n\n  async filterList(evt) {\n    const searchTerm = evt;\n  \n    if (!searchTerm) {\n      await this.getVisitors();\n      return;\n    }\n  \n    this.visitors = this.visitors.filter(currentVisitor => {\n      if (currentVisitor.first_name && searchTerm) {\n        return (currentVisitor.first_name.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\n      }\n      if (currentVisitor.last_name && searchTerm) {\n        return (currentVisitor.last_name.toLowerCase().indexOf(searchTerm.toLowerCase()) > -1);\n      }\n    });\n  }\n\n  async presentVisitor(visitor: any) {\n    var myVisitor = JSON.stringify(visitor);\n\n    const modal = await this.modalCtrl.create({\n      component: ImagePage,\n      componentProps: { value: myVisitor }\n    });\n    return await modal.present();\n  }\n\n  async signOut(id) {\n    const alert = await this.alertCtrl.create({\n      header: 'Confirmation',\n      message: 'Sign out the visitor?',\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          cssClass: 'secondary',\n        }, {\n          text: 'Confirm',\n          handler: async () => {\n\n            this.service.visitorSignOut(id).subscribe();\n\n            const loader = await this.loadingCtrl.create({\n              duration: 2000\n            });\n\n            loader.present();\n            loader.onWillDismiss().then(async l => {\n              const toast = await this.toastCtrl.create({\n                showCloseButton: true,\n                message: 'Visitor signed out successfully',\n                duration: 3000,\n                position: 'bottom'\n              });\n\n              toast.present();\n            });\n\n\n            this.ngOnInit();\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n}\n"],"sourceRoot":""}