{"version":3,"sources":["webpack:///./src/app/pages/manual-sign-in/manual-sign-in.module.ts","webpack:///./src/app/pages/manual-sign-in/manual-sign-in.page.html","webpack:///./src/app/pages/manual-sign-in/manual-sign-in.page.scss","webpack:///./src/app/pages/manual-sign-in/manual-sign-in.page.ts"],"names":[],"mappings":"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","file":"pages-manual-sign-in-manual-sign-in-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ManualSignInPage } from './manual-sign-in.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ManualSignInPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    ReactiveFormsModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [ManualSignInPage]\n})\nexport class ManualSignInPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"primary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button color=\\\"secondary\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n        <ion-text color=\\\"light\\\">\\n          <ion-text color=\\\"light\\\" class=\\\"fw700\\\">Sign in visitor</ion-text>\\n        </ion-text>\\n    </ion-title> \\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content style=\\\"padding-bottom: 50px;\\\">\\n  <form [formGroup]=\\\"service.form\\\" (submit)=\\\"signIn()\\\">\\n    <ion-item >\\n      <ion-label position=\\\"floating\\\" color=\\\"secondary\\\">First Name</ion-label>\\n      <ion-input type=\\\"text\\\" formControlName=\\\"first_name\\\"></ion-input>\\n    </ion-item>\\n    <ion-item >\\n      <ion-label position=\\\"floating\\\" color=\\\"secondary\\\">Last Name</ion-label>\\n      <ion-input type=\\\"text\\\" formControlName=\\\"last_name\\\"></ion-input>\\n    </ion-item>\\n    <ion-item >\\n      <ion-label position=\\\"floating\\\" color=\\\"secondary\\\">Mobile Number</ion-label>\\n      <ion-input type=\\\"tel\\\" formControlName=\\\"mobile\\\"></ion-input>\\n    </ion-item>\\n    <ion-item >\\n      <ion-label position=\\\"floating\\\" color=\\\"secondary\\\">Company Name</ion-label>\\n      <ion-input type=\\\"text\\\" formControlName=\\\"company_name\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\" color=\\\"secondary\\\">Address</ion-label>\\n      <ion-input type=\\\"text\\\" formControlName=\\\"address\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\" color=\\\"secondary\\\">Email</ion-label>\\n      <ion-input type=\\\"email\\\" formControlName=\\\"email\\\"></ion-input> \\n    </ion-item>\\n    <ion-item >\\n      <ion-label position=\\\"floating\\\" color=\\\"secondary\\\">ID Number</ion-label>\\n      <ion-input type=\\\"text\\\" formControlName=\\\"id_number\\\"></ion-input>\\n    </ion-item>\\n    <ion-item >\\n      <ion-label position=\\\"floating\\\" color=\\\"secondary\\\">Vehicle Registration</ion-label>\\n      <ion-input type=\\\"text\\\" formControlName=\\\"vehicle_reg\\\"></ion-input>\\n    </ion-item>\\n    <ion-item style=\\\"margin-top: 25px\\\">\\n      <ion-label color=\\\"secondary\\\">Person Visited</ion-label>\\n      <ion-select ok-text=\\\"Done\\\" cancel-text=\\\"Cancel\\\" formControlName=\\\"person_visited\\\">\\n        <ion-select-option *ngFor=\\\"let employee of employee\\\" value=\\\"{{employee._id}}\\\">{{employee.first_name}} {{employee.last_name}}</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    <ion-item style=\\\"margin-top: 25px\\\">\\n      <ion-label color=\\\"secondary\\\">Purpose of visit</ion-label>\\n      <ion-select ok-text=\\\"Done\\\" cancel-text=\\\"Cancel\\\" formControlName=\\\"purpose_of_visit\\\">\\n        <ion-select-option value=\\\"Business\\\">Business</ion-select-option>\\n        <ion-select-option value=\\\"Personal\\\">Personal</ion-select-option>\\n        <ion-select-option value=\\\"Delivery\\\">Delivery</ion-select-option>\\n        <ion-select-option value=\\\"Work\\\">Work</ion-select-option>\\n      </ion-select>\\n    </ion-item>\\n    \\n    <ion-row style=\\\"padding:10px; margin-top: 20px; margin-bottom: 50px;\\\">\\n      <ion-col no-padding>\\n        <ion-button type=\\\"submit\\\" expand=\\\"clear\\\" color=\\\"primary\\\" style=\\\"width: 100%;\\\" icon-start [disabled]=\\\"service.form.invalid\\\">\\n          Done\\n        </ion-button>\\n      </ion-col>\\n      <ion-col text-right no-padding>\\n        <ion-button expand=\\\"clear\\\" color=\\\"danger\\\" style=\\\"width: 100%;\\\" icon-start (click)=\\\"onClear()\\\">\\n          Clear\\n        </ion-button>\\n      </ion-col>    \\n    </ion-row>\\n    <!-- <ion-button expand=\\\"clear\\\" type=\\\"submit\\\" color=\\\"secondary\\\" [disabled]=\\\"!visitorsForm.valid\\\">Sign in</ion-button> -->\\n  </form>\\n  \\n</ion-content>\\n<popmenu></popmenu>\"","module.exports = \":host ion-content {\\n  --background: var(--ion-color-light);\\n}\\n:host ion-item {\\n  border-radius: 0;\\n  border-bottom: 1px dotted var(--ion-color-medium);\\n}\\n:host ion-card.no-radius {\\n  border-radius: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy90YW11a2EvRG9jdW1lbnRzL0RldmVsb3BtZW50UHJvamVjdHMvYm9va2luZy1tYXRlL21vYmlsZS1hcHAvc3JjL2FwcC9wYWdlcy9tYW51YWwtc2lnbi1pbi9tYW51YWwtc2lnbi1pbi5wYWdlLnNjc3MiLCJzcmMvYXBwL3BhZ2VzL21hbnVhbC1zaWduLWluL21hbnVhbC1zaWduLWluLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUNJLG9DQUFBO0FDQVI7QURHSTtFQUNJLGdCQUFBO0VBQ0EsaURBQUE7QUNEUjtBREtRO0VBQ0ksZ0JBQUE7QUNIWiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL21hbnVhbC1zaWduLWluL21hbnVhbC1zaWduLWluLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgICBpb24tY29udGVudCB7XG4gICAgICAgIC0tYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLWxpZ2h0KTtcbiAgICB9XG5cbiAgICBpb24taXRlbSB7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgICAgIGJvcmRlci1ib3R0b206IDFweCBkb3R0ZWQgdmFyKC0taW9uLWNvbG9yLW1lZGl1bSk7XG4gICAgfVxuXG4gICAgaW9uLWNhcmQge1xuICAgICAgICAmLm5vLXJhZGl1cyB7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwO1xuICAgICAgICB9XG4gICAgfVxufSIsIjpob3N0IGlvbi1jb250ZW50IHtcbiAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItbGlnaHQpO1xufVxuOmhvc3QgaW9uLWl0ZW0ge1xuICBib3JkZXItcmFkaXVzOiAwO1xuICBib3JkZXItYm90dG9tOiAxcHggZG90dGVkIHZhcigtLWlvbi1jb2xvci1tZWRpdW0pO1xufVxuOmhvc3QgaW9uLWNhcmQubm8tcmFkaXVzIHtcbiAgYm9yZGVyLXJhZGl1czogMDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { VisitorsService } from 'src/app/services/visitors.service';\nimport {\n  NavController,\n  AlertController,\n  MenuController,\n  ToastController,\n  PopoverController,\n  ModalController, \n  LoadingController} from '@ionic/angular';\nimport { EmployeesService } from 'src/app/services/employees.service';\nimport { NgxSpinnerService } from \"ngx-spinner\";\nimport { Storage } from '@ionic/storage';\nimport { JwtHelperService } from '@auth0/angular-jwt';\nimport { finalize } from 'rxjs/operators';\n\nconst TOKEN_KEY = 'access_token';\n\n@Component({\n  selector: 'app-manual-sign-in',\n  templateUrl: './manual-sign-in.page.html',\n  styleUrls: ['./manual-sign-in.page.scss'],\n})\nexport class ManualSignInPage implements OnInit {\n\n  visitorInfo = null;\n  employee:any;\n  staff:any;\n\n  constructor(\n    public service: VisitorsService,\n    public employeeService: EmployeesService,\n    public navCtrl: NavController,\n    public menuCtrl: MenuController,\n    public popoverCtrl: PopoverController,\n    public alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n    public modalCtrl: ModalController,\n    public toastCtrl: ToastController,\n    private spinner: NgxSpinnerService,\n    private helper: JwtHelperService, \n    private storage: Storage,\n  ) { }\n\n  async ngOnInit() {\n    await this.getStaff();\n    this.spinner.show();\n    await this.getEmployee();\n  }\n\n  async getStaff() {\n    await this.storage.get(TOKEN_KEY)\n      .then((token) => {\n\n        if (token) {\n          let decoded = this.helper.decodeToken(token);\n          this.staff = decoded;\n        }\n\n      });\n  }\n\n  async getEmployee(){\n    await this.employeeService.allEmployees(this.staff).pipe(\n      finalize(() => this.spinner.hide())\n    ).subscribe(res => {\n      this.employee = res;\n    }, err => {\n      console.log(err);\n    });\n  }\n\n  executeSignIn(){\n    if(this.service.form.valid){\n      this.service.visitorSignin(this.service.form.value, this.staff).subscribe();\n      this.service.form.reset();\n      this.service.initializeFormGroup();\n    }\n  }\n\n  onClear() {\n    this.service.form.reset();\n    this.service.initializeFormGroup();\n  }\n\n  async signIn() {\n    const alert = await this.alertCtrl.create({\n      header: 'Confirmation',\n      message: 'Sign in the visitor?',\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          cssClass: 'secondary',\n        }, {\n          text: 'Confirm',\n          handler: async () => {\n\n            this.executeSignIn();\n\n            const loader = await this.loadingCtrl.create({\n              duration: 2000\n            });\n\n            loader.present();\n            loader.onWillDismiss().then(async l => {\n              const toast = await this.toastCtrl.create({\n                showCloseButton: true,\n                message: 'Visitor signed in successfully',\n                duration: 3000,\n                position: 'bottom'\n              });\n\n              toast.present();\n            });\n\n\n            this.ngOnInit();\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n}\n"],"sourceRoot":""}